[34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[34m  MCP Server Real BC Integration Tests[0m
[34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

Starting MCP server with REAL BC connection...
[90m(This may take 5-10 seconds to authenticate and connect)[0m

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Business Central MCP Server - Real BC Integration
  Using REAL BC Server Connection
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 1: Creating BC session connection...
  URL: http://Cronus27/BC/
  User: default\sshadows

Step 2: Connecting to BC server...
  (This may take a few seconds...)
âœ“ Connected to BC server successfully

Step 3: Creating MCP server...
  Registering tools...
[DEBUG] Tool registered {"toolName":"get_page_metadata","description":"Retrieves metadata for a Business Central page including available fields, actions, and page structure. Use this to understand what data and operations are available on a page before reading or modifying data."}
[DEBUG] Tool registered {"toolName":"search_pages","description":"Searches for Business Central pages by name or type. Use this to discover available pages before getting their metadata. Returns page IDs that can be used with get_page_metadata."}
[DEBUG] Tool registered {"toolName":"read_page_data","description":"Reads data records from a Business Central page. Use get_page_metadata first to understand available fields. Supports filtering records by field values."}
[DEBUG] Tool registered {"toolName":"write_page_data","description":"Creates or updates a record on a Business Central page. Use get_page_metadata first to understand required fields and field types. Provide recordId for updates, omit for creates."}
  âœ“ Registered 4 tools

Step 4: Initializing server...
[INFO] Initializing MCP server {"tools":4,"resources":0}
[INFO] MCP server initialized successfully
âœ“ Server initialized

Step 5: Starting stdio transport...
[INFO] Starting stdio transport
[INFO] Stdio transport started
âœ“ Stdio transport started

Step 6: Starting MCP server...
[INFO] Starting MCP server {"tools":4,"resources":0}
[INFO] MCP server started successfully
âœ“ MCP server started

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Server ready - Connected to REAL BC server!
  Listening on stdin, responding on stdout
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Available tools:
  - get_page_metadata (pageId) - âœ“ REAL BC DATA
  - search_pages (query, limit?, type?)
  - read_page_data (pageId, filters?) - Not implemented
  - write_page_data (pageId, fields, recordId?) - Not implemented

Test with real BC pages:
  Page 21 - Customer Card
  Page 22 - Customer List
  Page 30 - Item Card
  Page 42 - Sales Order

Example requests:
  {"jsonrpc":"2.0","id":1,"method":"initialize","params":{"protocolVersion":"2024-11-05","capabilities":{},"clientInfo":{"name":"Test","version":"1.0.0"}}}
  {"jsonrpc":"2.0","id":2,"method":"tools/list"}
  {"jsonrpc":"2.0","id":3,"method":"tools/call","params":{"name":"get_page_metadata","arguments":{"pageId":"21"}}}
  {"jsonrpc":"2.0","id":4,"method":"tools/call","params":{"name":"search_pages","arguments":{"query":"customer","limit":5}}}

[32mâœ“ Server started and connected to BC[0m

[34mRunning Real BC Integration Tests[0m
[36m(These tests use REAL Business Central data)[0m

[33mTesting: Initialize server...[0m[DEBUG] Routing request {"method":"initialize","id":1}
[INFO] Handling initialize request {"clientName":"Real BC Test Client","clientVersion":"1.0.0","protocolVersion":"2024-11-05"}
[DEBUG] Initialize response {"protocolVersion":"2024-11-05","serverName":"bc-mcp-server","serverVersion":"1.0.0"}
[32m âœ“ PASS[0m
[33mTesting: List tools...[0m[DEBUG] Routing request {"method":"tools/list","id":2}
[DEBUG] Handling tools/list request
[DEBUG] Returning tools list {"count":4}
[32m âœ“ PASS[0m
[33mTesting: Get REAL metadata for Page 21 (Customer Card)...[0m[DEBUG] Routing request {"method":"tools/call","id":3}
[INFO] Handling tools/call request {"toolName":"get_page_metadata"}
[GetPageMetadataTool] Requesting metadata for BC Page: "21"
[GetPageMetadataTool] ğŸ†• Opening new BC Page: "21" (using LoadForm solution)
[GetPageMetadataTool] ğŸ“ OpenForm query string: tenant=default&company=CRONUS%20Danmark%20A%2FS&page=21&runinframe=1&dc=1761985418277&startTraceId=0fc97f43-51d2-4538-9714-fe314b2cf0f0&bookmark=
  ğŸ”§ OpenForm: openFormIds=[], tracked forms: 0
  ğŸ“ Tracking new form ID: 398, Handle: 4ec77d6c-ceb7-4e40-a5a9-6002ab067362
[GetPageMetadataTool] âœ“ OpenForm created shell for Page "21"
[GetPageMetadataTool] â„¹ï¸  Response not compressed, processing raw handlers
[LoadFormHelpers] Extracted ServerIds: shell=398, children=11
[GetPageMetadataTool] âœ“ Extracted ServerIds: shell=398, children=11
[LoadFormHelpers] Will LoadForm: 38D (Customer Picture)
[LoadFormHelpers] Skip LoadForm: 38E (Documents) - no DelayedControls or ExpressionProperties
[LoadFormHelpers] Will LoadForm: 392 (Sell-to Customer Sales History)
[LoadFormHelpers] Skip LoadForm: 393 (Customer Statistics) - no DelayedControls or ExpressionProperties
[LoadFormHelpers] Skip LoadForm: 394 (Dimensions) - no DelayedControls or ExpressionProperties
[LoadFormHelpers] Will LoadForm: 396 (Links)
[LoadFormHelpers] Will LoadForm: 397 (Notes)
[GetPageMetadataTool] âœ“ Filtered forms to load: 4/11
  ğŸ“‹ Tracking form: Page 21 â†’ formId 398
[LoadChildForms] Loading 4 child forms...
[LoadChildForms] LoadForm: 38D (Customer Picture)
[LoadChildForms] âœ“ Loaded 38D: 3 handlers
[LoadChildForms] LoadForm: 392 (Sell-to Customer Sales History)
[LoadChildForms] âœ“ Loaded 392: 3 handlers
[LoadChildForms] LoadForm: 396 (Links)
[LoadChildForms] âœ“ Loaded 396: 3 handlers
[LoadChildForms] LoadForm: 397 (Notes)
[LoadChildForms] âœ“ Loaded 397: 3 handlers
[LoadChildForms] Total handlers accumulated: 12
[GetPageMetadataTool] âœ“ Loaded 4 child forms, total handlers: 16
[PageMetadataParser] â•â•â• Received 16 handlers â•â•â•
[PageMetadataParser]   Handler 0: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 1: DN.SessionInitHandler
[PageMetadataParser]   Handler 2: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 3: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 4: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 5: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 6: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 7: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 8: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 9: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 10: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 11: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 12: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 13: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 14: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 15: DN.LogicalClientChangeHandler
[HandlerParser] Extracted formId from callback: 398
[PageMetadataParser] Extracted formId: 398
[HandlerParser] Found 5 FormToShow handlers
[HandlerParser] FormId for filtering: 398
[HandlerParser]   Handler 0: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 1: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 2: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 3: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 4: ServerId="398", Caption="Customer Card"
[HandlerParser]   Checking ServerId="398" === formId="398": true
[HandlerParser] âœ“ Matched handler: ServerId="398", Caption="Customer Card"
[PageMetadataParser] Selected form - ServerId: 398 Caption: Customer Card
[GetPageMetadataTool] âœ“ Parsed metadata for Page "21": caption="Customer Card", pageId="21"
[DEBUG] Tool executed successfully {"toolName":"get_page_metadata"}
[90m      Caption: "Customer Card"[0m
[90m      Fields: 137[0m
[90m      Actions: 174[0m
[32m âœ“ PASS[0m
[33mTesting: Search for customer pages...[0m[DEBUG] Routing request {"method":"tools/call","id":4}
[INFO] Handling tools/call request {"toolName":"search_pages"}
[DEBUG] Tool executed successfully {"toolName":"search_pages"}
[32m âœ“ PASS[0m
[33mTesting: Get REAL metadata for Page 22 (Customer List)...[0m[DEBUG] Routing request {"method":"tools/call","id":5}
[INFO] Handling tools/call request {"toolName":"get_page_metadata"}
[GetPageMetadataTool] Requesting metadata for BC Page: "22"
[GetPageMetadataTool] ğŸ§¹ Closing ALL 1 open forms to prevent BC caching
  ğŸ”§ CloseForm: openFormIds=[], tracked forms: 1
  ğŸ“ Untracked form: Page 21 â†’ formId 398
  ğŸ“ Clearing tracked form ID: 398
[GetPageMetadataTool]   âœ“ Closed form 398
[GetPageMetadataTool] ğŸ†• Opening new BC Page: "22" (using LoadForm solution)
[GetPageMetadataTool] ğŸ“ OpenForm query string: tenant=default&company=CRONUS%20Danmark%20A%2FS&page=22&runinframe=1&dc=1761985418427&startTraceId=381f5718-a51a-4f12-9e2f-ac81283ca7af&bookmark=
  ğŸ”§ OpenForm: openFormIds=[], tracked forms: 0
  ğŸ“ Tracking new form ID: 398, Handle: 4ec77d6c-ceb7-4e40-a5a9-6002ab067362
[GetPageMetadataTool] âœ“ OpenForm created shell for Page "22"
[GetPageMetadataTool] â„¹ï¸  Response not compressed, processing raw handlers
[LoadFormHelpers] Extracted ServerIds: shell=398, children=11
[GetPageMetadataTool] âœ“ Extracted ServerIds: shell=398, children=11
[LoadFormHelpers] Will LoadForm: 38D (Customer Picture)
[LoadFormHelpers] Skip LoadForm: 38E (Documents) - no DelayedControls or ExpressionProperties
[LoadFormHelpers] Will LoadForm: 392 (Sell-to Customer Sales History)
[LoadFormHelpers] Skip LoadForm: 393 (Customer Statistics) - no DelayedControls or ExpressionProperties
[LoadFormHelpers] Skip LoadForm: 394 (Dimensions) - no DelayedControls or ExpressionProperties
[LoadFormHelpers] Will LoadForm: 396 (Links)
[LoadFormHelpers] Will LoadForm: 397 (Notes)
[GetPageMetadataTool] âœ“ Filtered forms to load: 4/11
  ğŸ“‹ Tracking form: Page 22 â†’ formId 398
[LoadChildForms] Loading 4 child forms...
[LoadChildForms] LoadForm: 38D (Customer Picture)
[LoadChildForms] âœ“ Loaded 38D: 3 handlers
[LoadChildForms] LoadForm: 392 (Sell-to Customer Sales History)
[LoadChildForms] âœ“ Loaded 392: 3 handlers
[LoadChildForms] LoadForm: 396 (Links)
[LoadChildForms] âœ“ Loaded 396: 3 handlers
[LoadChildForms] LoadForm: 397 (Notes)
[LoadChildForms] âœ“ Loaded 397: 3 handlers
[LoadChildForms] Total handlers accumulated: 12
[GetPageMetadataTool] âœ“ Loaded 4 child forms, total handlers: 15
[PageMetadataParser] â•â•â• Received 15 handlers â•â•â•
[PageMetadataParser]   Handler 0: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 1: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 2: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 3: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 4: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 5: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 6: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 7: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 8: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 9: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 10: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 11: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 12: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 13: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 14: DN.LogicalClientChangeHandler
[HandlerParser] Extracted formId from callback: 398
[PageMetadataParser] Extracted formId: 398
[HandlerParser] Found 5 FormToShow handlers
[HandlerParser] FormId for filtering: 398
[HandlerParser]   Handler 0: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 1: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 2: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 3: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 4: ServerId="398", Caption="Customer Card"
[HandlerParser]   Checking ServerId="398" === formId="398": true
[HandlerParser] âœ“ Matched handler: ServerId="398", Caption="Customer Card"
[PageMetadataParser] Selected form - ServerId: 398 Caption: Customer Card
[GetPageMetadataTool] âœ“ Parsed metadata for Page "22": caption="Customer Card", pageId="21"
[DEBUG] Tool executed successfully {"toolName":"get_page_metadata"}
[31m âœ— FAIL[0m
[31m  Wrong pageId: 21[0m
[33mTesting: Get REAL metadata for Page 30 (Item Card)...[0m[DEBUG] Routing request {"method":"tools/call","id":6}
[INFO] Handling tools/call request {"toolName":"get_page_metadata"}
[GetPageMetadataTool] Requesting metadata for BC Page: "30"
[GetPageMetadataTool] ğŸ§¹ Closing ALL 1 open forms to prevent BC caching
  ğŸ”§ CloseForm: openFormIds=[], tracked forms: 1
  ğŸ“ Untracked form: Page 22 â†’ formId 398
  ğŸ“ Clearing tracked form ID: 398
[GetPageMetadataTool]   âœ“ Closed form 398
[GetPageMetadataTool] ğŸ†• Opening new BC Page: "30" (using LoadForm solution)
[GetPageMetadataTool] ğŸ“ OpenForm query string: tenant=default&company=CRONUS%20Danmark%20A%2FS&page=30&runinframe=1&dc=1761985418470&startTraceId=1f9b6a56-a535-458a-91e9-815bb69e0f66&bookmark=
  ğŸ”§ OpenForm: openFormIds=[], tracked forms: 0
  ğŸ“ Tracking new form ID: 398, Handle: 4ec77d6c-ceb7-4e40-a5a9-6002ab067362
[GetPageMetadataTool] âœ“ OpenForm created shell for Page "30"
[GetPageMetadataTool] â„¹ï¸  Response not compressed, processing raw handlers
[LoadFormHelpers] Extracted ServerIds: shell=398, children=11
[GetPageMetadataTool] âœ“ Extracted ServerIds: shell=398, children=11
[LoadFormHelpers] Will LoadForm: 38D (Customer Picture)
[LoadFormHelpers] Skip LoadForm: 38E (Documents) - no DelayedControls or ExpressionProperties
[LoadFormHelpers] Will LoadForm: 392 (Sell-to Customer Sales History)
[LoadFormHelpers] Skip LoadForm: 393 (Customer Statistics) - no DelayedControls or ExpressionProperties
[LoadFormHelpers] Skip LoadForm: 394 (Dimensions) - no DelayedControls or ExpressionProperties
[LoadFormHelpers] Will LoadForm: 396 (Links)
[LoadFormHelpers] Will LoadForm: 397 (Notes)
[GetPageMetadataTool] âœ“ Filtered forms to load: 4/11
  ğŸ“‹ Tracking form: Page 30 â†’ formId 398
[LoadChildForms] Loading 4 child forms...
[LoadChildForms] LoadForm: 38D (Customer Picture)
[LoadChildForms] âœ“ Loaded 38D: 3 handlers
[LoadChildForms] LoadForm: 392 (Sell-to Customer Sales History)
[LoadChildForms] âœ“ Loaded 392: 3 handlers
[LoadChildForms] LoadForm: 396 (Links)
[LoadChildForms] âœ“ Loaded 396: 3 handlers
[LoadChildForms] LoadForm: 397 (Notes)
[LoadChildForms] âœ“ Loaded 397: 3 handlers
[LoadChildForms] Total handlers accumulated: 12
[GetPageMetadataTool] âœ“ Loaded 4 child forms, total handlers: 15
[PageMetadataParser] â•â•â• Received 15 handlers â•â•â•
[PageMetadataParser]   Handler 0: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 1: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 2: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 3: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 4: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 5: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 6: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 7: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 8: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 9: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 10: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 11: DN.LogicalClientChangeHandler
[PageMetadataParser]   Handler 12: DN.CallbackResponseProperties
[PageMetadataParser]   Handler 13: DN.LogicalClientEventRaisingHandler
[PageMetadataParser]     Event: FormToShow
[PageMetadataParser]   Handler 14: DN.LogicalClientChangeHandler
[HandlerParser] Extracted formId from callback: 398
[PageMetadataParser] Extracted formId: 398
[HandlerParser] Found 5 FormToShow handlers
[HandlerParser] FormId for filtering: 398
[HandlerParser]   Handler 0: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 1: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 2: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 3: ServerId="398", Caption="Customer Card"
[HandlerParser]   Handler 4: ServerId="398", Caption="Customer Card"
[HandlerParser]   Checking ServerId="398" === formId="398": true
[HandlerParser] âœ“ Matched handler: ServerId="398", Caption="Customer Card"
[PageMetadataParser] Selected form - ServerId: 398 Caption: Customer Card
[GetPageMetadataTool] âœ“ Parsed metadata for Page "30": caption="Customer Card", pageId="21"
[DEBUG] Tool executed successfully {"toolName":"get_page_metadata"}
[31m âœ— FAIL[0m
[31m  Wrong pageId: 21[0m
[33mTesting: Call invalid tool...[0m[DEBUG] Routing request {"method":"tools/call","id":7}
[INFO] Handling tools/call request {"toolName":"invalid_tool"}
[32m âœ“ PASS[0m
[33mTesting: Ping server...[0m[DEBUG] Routing request {"method":"ping","id":8}
[32m âœ“ PASS[0m

[34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[34m  Test Results[0m
[34mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[32mâœ“ Passed: 6[0m
[31mâœ— Failed: 2[0m

[36mâœ¨ All tests used REAL Business Central data![0m

Stopping server...
[INFO] Stdin closed, stopping transport
[INFO] Stopping stdio transport
[INFO] Stdio transport stopped
node:events:496
      throw er; // Unhandled 'error' event
      ^

Error: EPIPE: broken pipe, write
    at Socket._write (node:internal/net:63:18)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at console.value (node:internal/console/constructor:298:16)
    at console.log (node:internal/console/constructor:384:26)
    at WebSocket.<anonymous> (C:\bc4ubuntu\Decompiled\bc-poc\src\BCRawWebSocketClient.ts:200:19)
    at WebSocket.emit (node:events:518:28)
    at Receiver.receiverOnMessage (C:\bc4ubuntu\Decompiled\bc-poc\node_modules\ws\lib\websocket.js:1220:20)
    at Receiver.emit (node:events:518:28)
Emitted 'error' event on Socket instance at:
    at Socket.onerror (node:internal/streams/readable:1028:14)
    at Socket.emit (node:events:518:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  errno: -4047,
  syscall: 'write',
  code: 'EPIPE'
}

Node.js v22.14.0
